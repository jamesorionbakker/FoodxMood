(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,n){},111:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(28),c=n.n(r),s=n(7),i=n.n(s),o=n(13),l=(n(105),n(23)),u=n(16),d=n(9),j=n(17),h=n(43),b=n(58),O=n(76),p=function(){function e(t){Object(h.a)(this,e);var n=Object(O.a)(t),a=n.exp,r=n.username;this.value=t,this.exp=a,this.username=r}return Object(b.a)(e,[{key:"getCurrSeconds",value:function(){return Math.ceil(Date.now()/1e3)}},{key:"expired",value:function(){return this.exp<this.getCurrSeconds()+10}}]),e}();function m(){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/access");case 2:if(200===(t=e.sent).status){e.next=8;break}return e.next=6,t.json();case 6:throw n=e.sent,new Error(n);case 8:return e.next=10,t.json();case 10:return a=e.sent,e.abrupt("return",new p(a));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function e(t){if(Object(h.a)(this,e),t&&!t.expired()){this.accessToken=t;var n=t.username;this.username=n,this.isLoggedIn=!0}else this.accessToken=null,this.username="",this.isLoggedIn=!1},v=n(15);function y(e){return{type:"LOGIN_FORM/SET",payload:e}}var g=n(46),w=new f;var E=n(2),C={data:{},loading:!1};var N={show:!1,ingredients:[],time:"",mealType:"",_id:"",new:!1,edit:!1,timeString:"",dateString:""};var S={show:!1,symptoms:[],time:"",mood:null,_id:"",new:!1,edit:!1,dateString:"",timeString:""};var k={username:"",password:"",show:!1,invalidPassword:!1,invalidUsername:!1};var T={show:!1};var _={activity:{active:!0,filter:"all"}};var M=n(91);function I(e){var t=/^\w{1,}$/i.test(e);return{valid:t,error:t?"":"Invalid Password"}}function R(e){var t=Object(M.validate)(e);return{valid:t,error:t?"":"Invalid Email Address"}}function H(e){var t=/^\w{1,}$/i.test(e);return{valid:t,error:t?"":"Invalid Name"}}var A={value:"",valid:!1,touched:!1,error:""},L={show:!1,firstName:Object(E.a)({},A),lastName:Object(E.a)({},A),email:Object(E.a)({},A),username:Object(E.a)({},A),password:Object(E.a)({},A),passwordVerify:Object(E.a)({},A)};var F=Object(g.b)({UserState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERSTATE/SET":return t.payload;default:return e}},activity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTIVITY/SET_DATA":return Object(E.a)({},t.payload);case"ACTIVITY/LOADING":return Object(E.a)(Object(E.a)({},e),{},{loading:!0});default:return e}},mealForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"MEAL_FORM/EDIT":case"MEAL_FORM/NEW":return Object(E.a)(Object(E.a)({},N),n);case"MEAL_FORM/CHANGE":return Object(E.a)(Object(E.a)({},e),n);case"MEAL_FORM/CLOSE":return Object(E.a)({},N);case"MEAL_FORM/DELETE_INGREDIENT":var a=e.ingredients.filter((function(e){return e!==n}));return Object(E.a)(Object(E.a)({},e),{},{ingredients:a});default:return e}},healthCheckForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"HEALTH_CHECK_FORM/EDIT":case"HEALTH_CHECK_FORM/NEW":return Object(E.a)(Object(E.a)({},S),n);case"HEALTH_CHECK_FORM/DELETE_SYMPTOM":var a=e.symptoms.filter((function(e){return e!==n}));return Object(E.a)(Object(E.a)({},e),{},{symptoms:a});case"HEALTH_CHECK_FORM/CHANGE":return Object(E.a)(Object(E.a)({},e),n);case"HEALTH_CHECK_FORM/CLOSE":return Object(E.a)({},S);default:return e}},loginForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"LOGIN_FORM/SET":return Object(E.a)(Object(E.a)({},e),n);case"LOGIN_FORM/SHOW":return Object(E.a)(Object(E.a)({},e),{},{show:!0});case"LOGIN_FORM/RESET":return Object(E.a)({},k);default:return e}},userMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.payload,t.type){case"USER_MENU/SHOW":return console.log("showing"),Object(E.a)(Object(E.a)({},e),{},{show:!0});case"USER_MENU/HIDE":return console.log("hiding"),Object(E.a)(Object(E.a)({},e),{},{show:!1});default:return e}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"VIEW/ACTIVITY":return Object(E.a)(Object(E.a)({},_),n);default:return e}},registerForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"REGISTER_FORM/SHOW":return Object(E.a)(Object(E.a)({},e),{},{show:!0});case"REGISTER_FORM/HIDE":return Object(E.a)(Object(E.a)({},e),{},{show:!1});case"REGISTER_FORM/SET":case"REGISTER_FORM/VALIDATE":return Object(E.a)(Object(E.a)({},e),n);default:return Object(E.a)({},e)}}}),D=n(92),U=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),G=Object(g.c)(Object(g.a)(D.a),U),V=Object(g.d)(F,G),P=V.dispatch;function Y(){return V.getState().UserState.accessToken}function B(){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(Y().value)}}function W(e){return K.apply(this,arguments)}function K(){return(K=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y().expired()){e.next=3;break}return e.next=3,P(ee());case 3:return console.log("api get: "+t),e.next=6,fetch("/api/".concat(t),{method:"GET",headers:B()});case 6:return n=e.sent,e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return X.apply(this,arguments)}function X(){return(X=Object(o.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y().expired()){e.next=3;break}return e.next=3,P(ee());case 3:return console.log("api post: "+t),e.next=6,fetch("/api/".concat(t),{method:"POST",headers:B(),body:JSON.stringify(n)});case 6:return a=e.sent,e.next=9,a.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){return $.apply(this,arguments)}function $(){return($=Object(o.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y().expired()){e.next=3;break}return e.next=3,P(ee());case 3:return e.next=5,fetch("/api/".concat(t),{method:"PUT",headers:B(),body:JSON.stringify(n)});case 5:return a=e.sent,e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(o.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y().expired()){e.next=3;break}return e.next=3,P(ee());case 3:return e.next=5,fetch("/api/".concat(t,"/").concat(n),{method:"DELETE",headers:B()});case 5:return a=e.sent,e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return{type:"USERSTATE/SET",payload:e}}function ee(){return console.log("attempting login"),function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m();case 3:a=e.sent,t(Z(new f(a))),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("no refresh token, login required"),t({type:"LOGIN_FORM/SHOW"}),t(Z(new f));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()}function te(e){return{type:"REGISTER_FORM/SET",payload:e}}function ne(e){return{type:"REGISTER_FORM/VALIDATE",payload:e}}var ae=n(21),re=n(20),ce=n(18),se=(n(111),n(26)),ie=n.n(se),oe=n(1);function le(e){var t=e.name,n=e.state,a=e.validationCallback,r=e.placeholder,c=e.capitalize,s=e.type,i=e.onBlur,o=e.onChange;return Object(oe.jsxs)(l.a.Group,{children:[Object(oe.jsx)(l.a.Control,{name:t,value:n.value,isInvalid:n.touched&&!n.valid,isValid:n.touched&&n.valid,onBlur:function(e){e.target.value&&i(e,a)},onChange:function(e){var t=e.target,n=t.name,a=t.value;c&&(a=ie.a.startCase(ie.a.lowerCase(a))),o({name:n,value:a})},type:s,placeholder:r}),Object(oe.jsx)(l.a.Control.Feedback,{type:"invalid",children:n.error}),Object(oe.jsx)(l.a.Control.Feedback,{type:"valid",children:n.error})]})}function ue(){var e=Object(a.useState)(!1),t=Object(re.a)(e,2),n=t[0],r=(t[1],Object(v.b)()),c=Object(v.c)((function(e){return e.registerForm}));function s(e){e.preventDefault(),c.password.valid&&c.passwordVerify.valid&&c.username.valid&&c.firstName.valid&&c.lastName.valid&&c.username.valid&&console.log("good to go")}function h(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,a=t.value,r(te(Object(ae.a)({},n,{value:a})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(i.a.mark((function e(t,n){var a,c,s,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,c=a.name,s=a.value,e.next=3,n(s);case 3:o=e.sent,l=o.valid,u=o.error,r(ne(Object(ae.a)({},c,{value:s,valid:l,touched:!0,error:u})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(oe.jsx)(ce.a,{show:c.show,onHide:function(){return r({type:"REGISTER_FORM/HIDE"})},children:Object(oe.jsxs)(l.a,{onSubmit:s,noValidate:!0,children:[Object(oe.jsx)(ce.a.Header,{children:Object(oe.jsx)(ce.a.Title,{children:"Sign Up!"})}),Object(oe.jsxs)(ce.a.Body,{className:"register-form-container",children:[Object(oe.jsx)("h6",{children:"Personal info:"}),Object(oe.jsxs)(u.a,{children:[Object(oe.jsx)(d.a,{xs:6,children:Object(oe.jsx)(le,{state:c.firstName,name:"firstName",placeholder:"First Name",validationCallback:H,onChange:h,onBlur:O})}),Object(oe.jsx)(d.a,{xs:6,children:Object(oe.jsx)(le,{state:c.lastName,name:"lastName",placeholder:"Last Name",validationCallback:H,capitalize:!0,onChange:h,onBlur:O})})]}),Object(oe.jsx)(u.a,{children:Object(oe.jsx)(d.a,{xs:12,children:Object(oe.jsx)(le,{state:c.email,name:"email",placeholder:"Email",validationCallback:R,onChange:h,onBlur:O})})}),Object(oe.jsx)("hr",{}),Object(oe.jsx)("h6",{children:"Account Info:"}),Object(oe.jsx)(u.a,{children:Object(oe.jsx)(d.a,{xs:12,children:Object(oe.jsx)(le,{state:c.username,name:"username",placeholder:"Username",validationCallback:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^\w{1,}$/i.test(t)){e.next=2;break}return e.abrupt("return",{valid:!1,error:"Invalid Username"});case 2:return e.next=4,fetch("validation/username/"+t);case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,r=a?"Username is available":"Username is not available",e.abrupt("return",{valid:a,error:r});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChange:h,onBlur:O})})}),Object(oe.jsx)(u.a,{children:Object(oe.jsx)(d.a,{xs:12,children:Object(oe.jsx)(le,{state:c.password,name:"password",placeholder:"Password",validationCallback:I,onChange:h,onBlur:O})})}),Object(oe.jsx)(u.a,{children:Object(oe.jsx)(d.a,{xs:12,children:Object(oe.jsx)(le,{state:c.passwordVerify,name:"passwordVerify",placeholder:"Verify Password",validationCallback:function(e){var t=c.password.value===e;return{valid:t,error:t?"":"Passwords do not match"}},onChange:h,onBlur:O})})})]}),Object(oe.jsxs)(ce.a.Footer,{children:[Object(oe.jsx)(j.a,{variant:"secondary",onClick:function(){return r({type:"REGISTER_FORM/HIDE"})},children:"Cancel"}),Object(oe.jsx)(j.a,{onClick:s,type:"submit",disabled:n,variant:"success",children:n?"Creating Account":"Create Account"})]})]})})}function de(){var e=Object(v.c)((function(e){return e.loginForm})),t=Object(v.b)();return Object(oe.jsx)("div",{className:"login-container",children:e.show&&Object(oe.jsx)(l.a,{className:"form",children:Object(oe.jsx)("div",{className:"login",children:Object(oe.jsxs)(u.a,{className:"form-row",children:[Object(oe.jsx)(d.a,{md:"auto",children:Object(oe.jsx)(l.a.Control,{isInvalid:e.invalidUsername,name:"username",className:"username",placeholder:"User Name",value:e.username,onChange:function(e){t(y({username:e.target.value}))}})}),Object(oe.jsx)(d.a,{className:"filler",xs:12}),Object(oe.jsx)(d.a,{md:"auto",children:Object(oe.jsx)(l.a.Control,{isInvalid:e.invalidPassword,name:"password",className:"password",type:"password",value:e.password,onChange:function(e){t(y({password:e.target.value}))},placeholder:"Password"})}),Object(oe.jsx)(d.a,{className:"filler",xs:12}),Object(oe.jsx)(d.a,{xs:8,md:"auto",children:Object(oe.jsx)(j.a,{onClick:function(){console.log("signing in"),t(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,r,c,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n().loginForm,r=a.username,c=a.password,e.next=4,fetch("/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:r,password:c})});case 4:if(200===(s=e.sent).status){e.next=10;break}return e.next=8,s.json();case 8:throw o=e.sent,new Error(o);case 10:return e.t0=p,e.next=13,s.json();case 13:e.t1=e.sent,l=new e.t0(e.t1),t(Z(new f(l))),t({type:"LOGIN_FORM/RESET"}),e.next=24;break;case 19:e.prev=19,e.t2=e.catch(0),console.log(e.t2),"invalid username"===e.t2.message&&t(y({invalidPassword:!1,invalidUsername:!0})),"invalid password"===e.t2.message&&t(y({invalidPassword:!0,invalidUsername:!1}));case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}())},className:"login-button",variant:"light",children:"Sign In"})}),Object(oe.jsxs)(d.a,{xs:4,md:"auto",children:[Object(oe.jsx)(j.a,{onClick:function(){return t({type:"REGISTER_FORM/SHOW"})},className:"signup-button",variant:"success",children:"Sign Up"}),Object(oe.jsx)(ue,{})]})]})})})})}n(114);var je=n(39);n(115);var he=n(56);n(116);function be(e){var t=Object(v.c)((function(e){return e.userMenu})),n=Object(a.useState)(!1),r=Object(re.a)(n,2),c=r[0],s=r[1],l=Object(v.b)();return Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("h4",{children:["Hello, ",Object(v.c)((function(e){return e.UserState.username})),Object(oe.jsx)(j.a,{variant:"outline-dark",style:{marginLeft:"20px"},onClick:function(){return l({type:"USER_MENU/SHOW"})},children:Object(oe.jsx)("i",{className:"fas fa-bars"})})]}),Object(oe.jsxs)(he.a,{className:"user-menu",show:t.show,onHide:function(){return l({type:"USER_MENU/HIDE"})},placement:"end",children:[Object(oe.jsx)(he.a.Header,{closeButton:!0,children:Object(oe.jsx)(he.a.Title,{children:"Your Account"})}),Object(oe.jsxs)(he.a.Body,{children:[Object(oe.jsx)("div",{className:"options-container",children:Object(oe.jsxs)("ul",{children:[Object(oe.jsx)("li",{children:Object(oe.jsx)("button",{className:"link",children:"Account Settings"})}),Object(oe.jsx)("li",{children:Object(oe.jsx)("button",{className:"link",children:"Help"})})]})}),Object(oe.jsxs)("div",{className:"logout-button-container",children:[Object(oe.jsx)("hr",{}),Object(oe.jsx)(j.a,{disabled:c,variant:"success",className:"logout",onClick:Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,l(function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){return n().UserState.accessToken},e.prev=1,!a().expired()){e.next=5;break}return e.next=5,t(ee());case 5:return e.next=7,fetch("/logout",{headers:B()});case 7:e.sent,t(Z(new f)),t({type:"LOGIN_FORM/SHOW"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:s(!1);case 4:case"end":return e.stop()}}),e)}))),children:c?"Logging Out":"Log Out"})]})]})]})]})}function Oe(e){return Object(oe.jsx)(je.a,{fluid:!0,className:"header-container",children:Object(oe.jsxs)(u.a,{className:"header",children:[Object(oe.jsxs)(d.a,{xs:12,sm:"auto",className:"logo",children:["Food ",Object(oe.jsx)("span",{style:{color:"#888"},children:"x"})," Mood"]}),Object(oe.jsx)(d.a,{xs:12,md:!0,className:"filler"}),Object(oe.jsx)(d.a,{xs:12,md:"auto",className:"login",children:e.user.isLoggedIn?Object(oe.jsx)(be,{}):Object(oe.jsx)(de,{})})]})})}n(117);function pe(e){return function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"ACTIVITY/LOADING"}),a=n().view.activity.filter,e.next=5,W("activity/".concat(a));case 5:r=e.sent,c=Object.fromEntries(r.map((function(e){return[e._id,e]}))),t({type:"ACTIVITY/SET_DATA",payload:{data:c,loading:!1}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()}function me(e){return{type:"VIEW/ACTIVITY",payload:{activity:{active:!0,filter:e}}}}function xe(e){var t=Object(v.b)();e.setCurrentView;return Object(oe.jsxs)("div",{className:"sidebar-container",children:[Object(oe.jsxs)("div",{className:"nav-group",children:[Object(oe.jsx)("div",{className:"nav-group-title",children:Object(oe.jsx)("h5",{children:"Your Log"})}),Object(oe.jsx)("div",{onClick:function(){t(me("all"))},className:"nav-item",children:Object(oe.jsx)("a",{href:"#",children:"All Activity"})}),Object(oe.jsx)("div",{onClick:function(){t(me("meals"))},className:"nav-item",children:Object(oe.jsx)("a",{href:"#",children:"Meals"})}),Object(oe.jsx)("div",{onClick:function(){t(me("health-checks"))},className:"nav-item",children:Object(oe.jsx)("a",{href:"#",children:"Wellness"})}),Object(oe.jsx)("div",{className:"nav-item-catagory"})]}),Object(oe.jsxs)("div",{className:"nav-group",children:[Object(oe.jsx)("div",{className:"nav-group-title",children:Object(oe.jsx)("h5",{children:"Analysis"})}),Object(oe.jsx)("div",{className:"nav-item",children:Object(oe.jsx)("a",{href:"#",children:"Food Items"})}),Object(oe.jsx)("div",{className:"nav-item",children:Object(oe.jsx)("a",{href:"#",children:"Symptoms"})}),Object(oe.jsx)("div",{className:"nav-item-catagory"})]})]})}n(118);var fe=n(24),ve=n.n(fe);n(119);function ye(e){return Object(oe.jsxs)("div",{className:"pill",children:[Object(oe.jsx)("div",{className:"pill-primary ".concat(e.primaryColor),children:e.primaryText}),e.secondaryText&&Object(oe.jsx)("div",{className:"pill-secondary ".concat(e.secondaryColor),children:e.secondaryText})]})}var ge=n(66),we=n.n(ge);function Ee(e,t){return ve()("".concat(e," ").concat(t),"YYYY-MM-DD HH:mm").unix()}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve()().unix();return ve.a.unix(e).format("YYYY-MM-DD")}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve()().unix();return ve.a.unix(e).format("HH:mm")}function Se(e){return{type:"MEAL_FORM/CHANGE",payload:e}}function ke(e){return{type:"HEALTH_CHECK_FORM/CHANGE",payload:e}}function Te(e){var t,n=Object(v.b)(),a=e.entry,r=a._id,c=a.type;function s(){return(s=Object(o.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,q("activity/".concat(t),r);case 4:n(pe()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return"meal"===c&&(t="meals"),"healthCheck"===c&&(t="health-checks"),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("a",{onClick:function(e){return s.apply(this,arguments)},href:"#",children:Object(oe.jsx)("i",{style:{marginLeft:"10px"},className:"fas fa-times"})}),Object(oe.jsx)("a",{onClick:function(e){e.preventDefault(),"meal"===c&&n(function(e){var t=V.getState().activity.data[e];return{type:"MEAL_FORM/EDIT",payload:Object(E.a)(Object(E.a)({edit:!0,show:!0},t),{},{timeString:Ne(t.time),dateString:Ce(t.time)})}}(r)),"healthCheck"===c&&n(function(e){var t=V.getState().activity.data[e];return{type:"HEALTH_CHECK_FORM/EDIT",payload:Object(E.a)(Object(E.a)({edit:!0,show:!0},t),{},{timeString:Ne(t.time),dateString:Ce(t.time)})}}(r))},href:"#",children:Object(oe.jsx)("i",{style:{marginLeft:"10px"},className:"fas fa-pencil-alt"})})]})}ve()().format(),ve.a.extend(we.a);n(80);function _e(e){var t=e.entry,n=t.ingredients,a=t.mealType,r=t.time;return Object(oe.jsxs)(je.a,{fluid:!0,className:"entry-container",children:[Object(oe.jsxs)(u.a,{className:"entry-heading",children:[Object(oe.jsx)(d.a,{children:Object(oe.jsxs)("h6",{children:[a,": ",ve.a.unix(r).format("h:mm A")]})}),Object(oe.jsx)(d.a,{xs:"auto",children:Object(oe.jsx)(Te,{entry:t})})]}),Object(oe.jsxs)(u.a,{className:"entry-section",children:[Object(oe.jsx)(d.a,{xs:"auto",children:Object(oe.jsx)("div",{className:"section-title",children:"Ingredients:"})}),Object(oe.jsx)(d.a,{xs:!0,children:n.map((function(e,t){return Object(oe.jsx)(ye,{primaryText:e.name},t)}))})]})]})}var Me=function(e){var t=e.entry,n=t.symptoms,a=(t.mealType,t.type),r=t.time;t._id;return Object(oe.jsxs)(je.a,{fluid:!0,className:"entry-container",children:[Object(oe.jsxs)(u.a,{className:"entry-heading",children:[Object(oe.jsxs)(d.a,{children:[Object(oe.jsx)("span",{className:"entry-type-secondary",children:a}),Object(oe.jsx)("span",{className:"entry-date",children:r})]}),Object(oe.jsx)(d.a,{xs:"auto",children:Object(oe.jsx)(Te,{entry:t})})]}),Object(oe.jsxs)(u.a,{className:"entry-section",children:[Object(oe.jsx)(d.a,{xs:"auto",children:Object(oe.jsx)("div",{className:"section-title",children:"Symptoms:"})}),Object(oe.jsx)(d.a,{xs:!0,children:n.map((function(e,t){return Object(oe.jsx)(ye,{primaryText:e.description,secondaryText:{1:"Mild",2:"Moderate",3:"Severe"}[e.severity],secondaryColor:{1:"yellow",2:"orange",3:"red"}[e.severity]},t)}))})]})]})};n(120);function Ie(e){var t=e.entries,n=e.index;return Object(oe.jsxs)("div",{children:[n>0&&Object(oe.jsx)("hr",{}),Object(oe.jsx)(je.a,{fluid:!0,className:"date-block-container",children:Object(oe.jsxs)(u.a,{children:[Object(oe.jsx)(d.a,{xs:"auto",children:Object(oe.jsx)("div",{className:"date-container",children:Object(oe.jsx)("div",{children:t[0].date})})}),Object(oe.jsx)(d.a,{children:t.map((function(e){return"meal"===e.type?Object(oe.jsx)(_e,{entry:e},e._id):"healthCheck"===e.type?Object(oe.jsx)(Me,{entry:e},e._id):null}))})]})})]})}n(121);function Re(e){var t=Object(v.b)();return Object(oe.jsxs)("div",{className:"add-buttons-container",children:[Object(oe.jsxs)(j.a,{onClick:function(){t((console.log("new meal action"),{type:"MEAL_FORM/NEW",payload:{new:!0,show:!0,timeString:Ne(),dateString:Ce()}}))},className:"new-meal",variant:"success",children:[Object(oe.jsx)("i",{className:"fas fa-plus"})," Add Meal"]}),Object(oe.jsxs)(j.a,{onClick:function(){t((console.log("new meal action"),{type:"HEALTH_CHECK_FORM/NEW",payload:{new:!0,show:!0,timeString:Ne(),dateString:Ce()}}))},className:"new-meal",variant:"success",children:[Object(oe.jsx)("i",{className:"fas fa-plus"})," Add Wellness Check"]})]})}var He=n(69),Ae=n(99);n(143);function Le(e){var t=e.defaultInputValue,n=e.submit,r=e.placeholder,c=e.apiEndpoint,s=e.allowNewItems,l=e.suggestions,u=e.clearOnSubmit,d=Object(a.useState)(!1),j=Object(re.a)(d,2),h=j[0],b=j[1],O=Object(a.useState)([]),p=Object(re.a)(O,2),m=p[0],x=p[1],f=Object(a.useState)([]),v=Object(re.a)(f,2),y=v[0],g=v[1];function w(){return(w=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=4;break}x(l),e.next=13;break;case 4:return b(!0),t=ie.a.startCase(ie.a.lowerCase(t)),n="suggestions/".concat(c,"/").concat(t),e.t0=x,e.next=10,W(n);case 10:e.t1=e.sent,(0,e.t0)(e.t1),b(!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){if(!(e.length<=0)){var t=e[0],a=!1;"object"===typeof t&&(t=t.label,a=!0),t=ie.a.startCase(ie.a.lowerCase(t)),s&&a&&function(e){C.apply(this,arguments)}(t),n(t),u&&g([""])}}function C(){return(C=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(c,{value:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(oe.jsx)(Ae.a,{selectHintOnEnter:!0,id:"autocomplete-input",minLength:1,allowNew:s,delay:100,newSelectionPrefix:"Add a new item: ",isLoading:h,options:m,selected:y,placeholder:r,onChange:function(e){g(e),E(e)},onSearch:function(e){return w.apply(this,arguments)},defaultInputValue:t||""})}n(144);function Fe(e){var t=e.onClick;return Object(oe.jsx)("div",{className:"ingredient-pill",children:Object(oe.jsx)("div",{onClick:t,className:"pill-primary",children:e.primaryText})})}n(145);function De(e){var t=Object(a.useState)(!1),n=Object(re.a)(t,2),r=n[0],c=n[1],s=Object(v.c)((function(e){return e.mealForm})),h=Object(v.b)();function b(){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c(!0),t=Ee(s.dateString,s.timeString),n={ingredients:s.ingredients.map((function(e){return e.name})),type:s.mealType,time:t},!s.new){e.next=7;break}return e.next=7,J("activity/meals",n);case 7:if(!s.edit){e.next=10;break}return e.next=10,z("activity/meals/"+s._id,n);case 10:c(!1),p(),h(pe()),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),c(!1),p();case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({type:"MEAL_FORM/CLOSE"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(oe.jsxs)(ce.a,{show:s.show,onHide:p,children:[Object(oe.jsxs)(ce.a.Header,{closeButton:!0,children:[s.edit&&Object(oe.jsx)(ce.a.Title,{children:"Edit Meal"}),s.new&&Object(oe.jsx)(ce.a.Title,{children:"Post New Meal"})]}),Object(oe.jsx)(ce.a.Body,{children:Object(oe.jsxs)("div",{className:"meal-form-container",children:[Object(oe.jsx)(u.a,{children:Object(oe.jsx)(d.a,{xs:12,children:Object(oe.jsx)(Le,{submit:function(e){h(Se({mealType:e}))},suggestions:["Breakfast","Lunch","Dinner","Snack","Dessert","Drink"],defaultInputValue:s.mealType,placeholder:"Meal Type (ie: Breakfast, Lunch, Dinner)"})})}),Object(oe.jsxs)(u.a,{children:[Object(oe.jsx)(d.a,{xs:6,children:Object(oe.jsx)(l.a.Control,{type:"date",value:s.dateString,onChange:function(e){h(Se({dateString:e.target.value}))}})}),Object(oe.jsx)(d.a,{xs:6,children:Object(oe.jsx)(l.a.Control,{type:"time",value:s.timeString,onChange:function(e){h(Se({timeString:e.target.value}))}})})]}),Object(oe.jsx)(u.a,{children:Object(oe.jsx)(d.a,{children:Object(oe.jsx)(Le,{submit:function(e){e=ie.a.startCase(ie.a.lowerCase(e)),s.ingredients.map((function(e){return e.name})).includes(e)||h(Se({ingredients:[].concat(Object(He.a)(s.ingredients),[{name:e}])}))},apiEndpoint:"ingredients",allowNewItems:!0,clearOnSubmit:!0,placeholder:"Add Ingredients One at a Time"})})}),Object(oe.jsx)("div",{className:"ingredient-list",children:s.ingredients.map((function(e){return Object(oe.jsx)(Fe,{onClick:function(){h({type:"MEAL_FORM/DELETE_INGREDIENT",payload:e})},primaryText:e.name},e.id)}))})]})}),Object(oe.jsxs)(ce.a.Footer,{children:[Object(oe.jsx)(j.a,{variant:"secondary",onClick:p,children:"Cancel"}),s.new&&Object(oe.jsx)(j.a,{disabled:r,variant:"success",onClick:b,children:r?"Posting":"Post Meal"}),s.edit&&Object(oe.jsx)(j.a,{disabled:r,variant:"success",onClick:b,children:r?"Saving":"Save Changes"})]})]})}var Ue=n(96),Ge=n.n(Ue),Ve=n(97),Pe=n.n(Ve);function Ye(e){return function(e){return Object.entries(e).map((function(e){var t=Object(re.a)(e,2),n=(t[0],t[1]);return Object(E.a)({},n)})).sort((function(e,t){return t.time-e.time}))}(e).reduce((function(e,t){t.date=function(e){var t=ve.a.unix(e);if(t.isYesterday())return"Yesterday";if(t.isToday())return"Today";var n=ve()().subtract(1,"week");return t.isAfter(n)?t.format("dddd"):t.format("MMM DD")}(t.time);var n=e[e.length-1];return n?n[n.length-1].date===t.date?(e[e.length-1].unshift(t),e):(e.push([t]),e):[[t]]}),[])}ve()().format(),ve.a.extend(Ge.a),ve.a.extend(Pe.a),ve.a.extend(we.a);var Be=n(98);n(146);function We(){var e=Object(a.useState)(!1),t=Object(re.a)(e,2),n=t[0],r=t[1],c=Object(v.c)((function(e){return e.healthCheckForm})),s=Object(v.b)();function h(){s({type:"HEALTH_CHECK_FORM/CLOSE"})}function b(e){s(ke({mood:e}))}function O(){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),t=Ee(c.dateString,c.timeString),n={symptoms:c.symptoms.map((function(e){return e.description})),mood:c.mood,time:t},!c.new){e.next=7;break}return e.next=7,J("activity/health-checks",n);case 7:if(!c.edit){e.next=10;break}return e.next=10,z("activity/health-checks/"+c._id,n);case 10:r(!1),h(),s(pe()),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),r(!1),h();case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return Object(oe.jsxs)(ce.a,{show:c.show,onHide:h,children:[Object(oe.jsxs)(ce.a.Header,{closeButton:!0,children:[c.edit&&Object(oe.jsx)(ce.a.Title,{children:"Edit Wellness Check"}),c.new&&Object(oe.jsx)(ce.a.Title,{children:"Post New Wellness Check"})]}),Object(oe.jsx)(ce.a.Body,{children:Object(oe.jsxs)("div",{className:"health-check-form-container",children:[Object(oe.jsxs)(u.a,{children:[Object(oe.jsx)(d.a,{xs:6,children:Object(oe.jsx)(l.a.Control,{type:"date",name:"date",value:c.dateString,onChange:function(e){s(ke({dateString:e.target.value}))}})}),Object(oe.jsx)(d.a,{xs:6,children:Object(oe.jsx)(l.a.Control,{type:"time",name:"time",value:c.timeString,onChange:function(e){s(ke({timeString:e.target.value}))}})})]}),Object(oe.jsx)(u.a,{children:Object(oe.jsx)(d.a,{xs:12,children:Object(oe.jsxs)(Be.a,{style:{display:"flex"},children:[Object(oe.jsx)(j.a,{onClick:function(){return b(1)},className:"mood-button",variant:1===c.mood?"secondary":"light",children:"Grumpy"}),Object(oe.jsx)(j.a,{onClick:function(){return b(2)},className:"mood-button",variant:2===c.mood?"secondary":"light",children:"Neutral"}),Object(oe.jsx)(j.a,{onClick:function(){return b(3)},className:"mood-button",variant:3===c.mood?"secondary":"light",children:"Upbeat"})]})})}),Object(oe.jsx)(u.a,{children:Object(oe.jsx)(d.a,{children:Object(oe.jsx)(Le,{submit:function(e){e=ie.a.startCase(ie.a.lowerCase(e)),console.log(c.symptoms),c.symptoms.map((function(e){return e.description})).includes(e)||s(ke({symptoms:[].concat(Object(He.a)(c.symptoms),[{description:e}])}))},allowNewItems:!0,clearOnSubmit:!0,placeholder:"Add Symptoms One at a Time",apiEndpoint:"symptoms"})})}),Object(oe.jsx)("div",{className:"symptom-list",children:c.symptoms.map((function(e,t){return Object(oe.jsx)(Fe,{onClick:function(){s({type:"HEALTH_CHECK_FORM/DELETE_SYMPTOM",payload:e})},index:t,primaryText:e.description},t)}))})]})}),Object(oe.jsxs)(ce.a.Footer,{children:[Object(oe.jsx)(j.a,{variant:"secondary",onClick:h,children:"Cancel"}),c.new&&Object(oe.jsx)(j.a,{disabled:n,variant:"success",onClick:O,children:n?"Posting":"Post Health Check"}),c.edit&&Object(oe.jsx)(j.a,{disabled:n,variant:"success",onClick:O,children:n?"Saving":"Save Changes"})]})]})}function Ke(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e}));Object(a.useEffect)((function(){t(pe())}),[n.view]);var r=Ye(n.activity.data);return Object(oe.jsx)("div",{className:"activity-container",children:Object(oe.jsxs)("div",{children:[Object(oe.jsx)(Re,{}),Object(oe.jsx)(De,{}),Object(oe.jsx)(We,{}),r.map((function(e,t){return Object(oe.jsx)(Ie,{index:t,entries:e},t)}))]})})}function Je(e){var t=Object(v.c)((function(e){return e.view}));return Object(oe.jsxs)("div",{style:{position:"relative"},children:[Object(oe.jsx)(xe,{}),t.activity.active&&Object(oe.jsx)(Ke,{})]})}var Xe=function(){var e=Object(v.c)((function(e){return e.UserState})),t=Object(v.b)();return Object(a.useEffect)((function(){return t(ee())}),[]),Object(oe.jsxs)("div",{children:[Object(oe.jsx)(Oe,{user:e}),e.isLoggedIn&&Object(oe.jsx)(Je,{})]})};n(147);c.a.render(Object(oe.jsx)(v.a,{store:V,children:Object(oe.jsx)(Xe,{})}),document.getElementById("root"))},80:function(e,t,n){}},[[148,1,2]]]);
//# sourceMappingURL=main.e8f14e1f.chunk.js.map